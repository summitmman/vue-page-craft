import{r as K,d as W,L as J,c as U,l as q,b as X,o as E,a as R,b1 as Y,a_ as Z,w as $,f as k,i as N,G as Q,b2 as ee,aj as te}from"./index-BCaH7Z-I.js";import{a as re}from"./PageCrafter.vue_vue_type_script_setup_true_lang-D5bbMPvx.js";var y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ne(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var se="Expected a function",A="__lodash_hash_undefined__",F=1/0,oe="[object Function]",ae="[object GeneratorFunction]",ie="[object Symbol]",ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pe=/^\w*$/,le=/^\./,fe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ue=/[\\^$.*+?()[\]{}|]/g,de=/\\(\\)?/g,he=/^\[object .+?Constructor\]$/,ge=typeof y=="object"&&y&&y.Object===Object&&y,ye=typeof self=="object"&&self&&self.Object===Object&&self,C=ge||ye||Function("return this")();function _e(e,t){return e==null?void 0:e[t]}function ve(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}var be=Array.prototype,me=Function.prototype,H=Object.prototype,m=C["__core-js_shared__"],T=function(){var e=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),M=me.toString,S=H.hasOwnProperty,G=H.toString,we=RegExp("^"+M.call(S).replace(ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=C.Symbol,Ce=be.splice,Se=x(C,"Map"),g=x(Object,"create"),V=I?I.prototype:void 0,D=V?V.toString:void 0;function u(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Oe(){this.__data__=g?g(null):{}}function je(e){return this.has(e)&&delete this.__data__[e]}function Pe(e){var t=this.__data__;if(g){var r=t[e];return r===A?void 0:r}return S.call(t,e)?t[e]:void 0}function Ee(e){var t=this.__data__;return g?t[e]!==void 0:S.call(t,e)}function Re(e,t){var r=this.__data__;return r[e]=g&&t===void 0?A:t,this}u.prototype.clear=Oe;u.prototype.delete=je;u.prototype.get=Pe;u.prototype.has=Ee;u.prototype.set=Re;function h(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $e(){this.__data__=[]}function Te(e){var t=this.__data__,r=_(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Ce.call(t,r,1),!0}function Ie(e){var t=this.__data__,r=_(t,e);return r<0?void 0:t[r][1]}function Ve(e){return _(this.__data__,e)>-1}function De(e,t){var r=this.__data__,n=_(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}h.prototype.clear=$e;h.prototype.delete=Te;h.prototype.get=Ie;h.prototype.has=Ve;h.prototype.set=De;function d(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ae(){this.__data__={hash:new u,map:new(Se||h),string:new u}}function Fe(e){return v(this,e).delete(e)}function He(e){return v(this,e).get(e)}function Me(e){return v(this,e).has(e)}function Ge(e,t){return v(this,e).set(e,t),this}d.prototype.clear=Ae;d.prototype.delete=Fe;d.prototype.get=He;d.prototype.has=Me;d.prototype.set=Ge;function _(e,t){for(var r=e.length;r--;)if(Ye(e[r][0],t))return r;return-1}function xe(e,t){t=Ke(t,e)?[t]:Le(t);for(var r=0,n=t.length;e!=null&&r<n;)e=e[qe(t[r++])];return r&&r==n?e:void 0}function ze(e){if(!B(e)||Je(e))return!1;var t=Ze(e)||ve(e)?we:he;return t.test(Xe(e))}function Be(e){if(typeof e=="string")return e;if(j(e))return D?D.call(e):"";var t=e+"";return t=="0"&&1/e==-F?"-0":t}function Le(e){return z(e)?e:Ue(e)}function v(e,t){var r=e.__data__;return We(t)?r[typeof t=="string"?"string":"hash"]:r.map}function x(e,t){var r=_e(e,t);return ze(r)?r:void 0}function Ke(e,t){if(z(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||j(e)?!0:pe.test(e)||!ce.test(e)||t!=null&&e in Object(t)}function We(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Je(e){return!!T&&T in e}var Ue=O(function(e){e=Ne(e);var t=[];return le.test(e)&&t.push(""),e.replace(fe,function(r,n,s,o){t.push(s?o.replace(de,"$1"):n||r)}),t});function qe(e){if(typeof e=="string"||j(e))return e;var t=e+"";return t=="0"&&1/e==-F?"-0":t}function Xe(e){if(e!=null){try{return M.call(e)}catch{}try{return e+""}catch{}}return""}function O(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(se);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],o=r.cache;if(o.has(s))return o.get(s);var i=e.apply(this,n);return r.cache=o.set(s,i),i};return r.cache=new(O.Cache||d),r}O.Cache=d;function Ye(e,t){return e===t||e!==e&&t!==t}var z=Array.isArray;function Ze(e){var t=B(e)?G.call(e):"";return t==oe||t==ae}function B(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function ke(e){return!!e&&typeof e=="object"}function j(e){return typeof e=="symbol"||ke(e)&&G.call(e)==ie}function Ne(e){return e==null?"":Be(e)}function Qe(e,t,r){var n=e==null?void 0:xe(e,t);return n===void 0?r:n}var et=Qe;const w=ne(et),L=new RegExp(/(\{\{)[^{}]+(\}\})/),tt=e=>{var i;const t=e.replace("{{","").replace("}}","").trim(),n=((i=new RegExp(/[\.\[\?]/).exec(t))==null?void 0:i.index)??-1;let s=t,o="";return n>-1&&(s=t.substring(0,n),o=t.substring(n+1)),{variablePart:s,theRest:o}},rt=(e,t,r={},n={})=>{let s=e;const o=[];for(;s;){const i=L.exec(s);if(i==null){o.push(s),s="";continue}let a=i[0];const c=i.index,p=c+a.length;let l=!1;c>0&&o.push(s.substring(0,c)),a.includes("store.")&&(a=a.replace("store.",""),l=!0);const{variablePart:f,theRest:P}=tt(a);if(l&&r[f]!=null)o.push({rVar:r[f],theRest:P});else if(t[f]!=null)o.push({rVar:t[f],theRest:P});else if(n[f]!=null)o.push(n[f]);else{const b=K(void 0);l?r[f]=b:t[f]=b,o.push({rVar:b,theRest:""})}p>=s.length?s="":s=s.substring(p)}return o},nt=W({props:{schema:{type:Object,default:()=>{}},widgets:{type:Object,default:()=>{}},events:{type:Object,default:()=>{}},state:{type:Object,default:()=>{}},store:{type:Object,default:()=>{}}},components:{WidgetsRenderer:re},setup(e){return(()=>{const{schema:r}=e;r.events&&Object.keys(r.events).forEach(n=>{if(!r.events)return;const s=r.events&&r.events[n];if(typeof s=="function")return;let o=s.replace("{{","").replace("}}","").trim();o&&e.events[o]?r.events[n]=e.events[o]:r.events[n]=()=>{console.error(`Event ${o} not found`)}}),r.props&&Object.keys(r.props).forEach(n=>{if(r.props){if(r.props[n]!=null){const s=r.props[n];if(typeof s=="string"&&L.exec(s)){const i=rt(s,e.state,e.store);if(i.length===1){const a=i[0];if(typeof a!="string"&&typeof a!="function"){const{rVar:c,theRest:p}=a;p?J(c)?r.props[n]=w(c.value,p):r.props[n]=w(c,p):r.props[n]=c}else r.props[n]=a}else r.props[n]=U(()=>i.reduce((a,c)=>{if(typeof c=="function")return a;if(typeof c=="string")return a+c;const{rVar:p,theRest:l}=c;return l?a+=w(p.value,l):a+=p.value,a},""))}}if(n.includes("v-model")){const o=n.split(":")[1]??"modelValue";r.props[o]=r.props[n],r.events||(r.events={}),r.events[`update:${o}`]=i=>{r.props&&(r.props[n].value=i)}}}}),r.type==="v-if"&&(r.props||(r.props={}),r.props.widgets=e.widgets,r.props.events=e.events,r.props.state=e.state,r.props.store=e.store),r.type==="v-for"&&(r.props||(r.props={}),r.props.loopChildren=r.children,r.props.widgets=e.widgets,r.props.events=e.events,r.props.state=e.state,r.props.store=e.store)})(),{props:e,...e.schema.props,get propsBindings(){const r={};return Object.keys(this).forEach(n=>{n!=="propsBindings"&&n!=="props"&&(r[n]=this[n])}),r}}}});function st(e,t,r,n,s,o){const i=X("WidgetsRenderer");return E(),R(te(e.props.widgets[e.props.schema.type??""]??e.props.schema.type),Q(e.propsBindings,ee(e.props.schema.events??{})),Y({default:$(()=>[e.props.schema.children?(E(),R(i,{key:0,schema:e.props.schema.children,widgets:e.props.widgets,events:e.props.events,state:e.props.state,store:e.props.store},null,8,["schema","widgets","events","state","store"])):N("",!0)]),_:2},[Z(Object.keys(e.props.schema.slots??{}),(a,c)=>({name:a,fn:$(p=>{var l;return[k(i,{schema:JSON.parse(JSON.stringify((e.props.schema.slots??{})[a])),widgets:e.props.widgets,events:e.props.events,state:{...e.props.state,[((l=e.props.schema.props)==null?void 0:l.id)??""+a.replace(/[^(a-z)(A-Z)(0-9)_$]/gm,"")+"SlotProps"]:p},store:e.props.store},null,8,["schema","widgets","events","state","store"])]})}))]),1040)}const it=q(nt,[["render",st]]);export{it as default};
